# ğŸŒŸ SQLWithIDC â€“ Day 9 Challenge

## ğŸ§© **Challenge Question**

Calculate the average length of stay (in days) for each service, showing only services where the average stay is more than 7 days.
Also show the count of patients and order by average stay descending.

## ğŸ’» **SQL Query**
SELECT service,ROUND(AVG(departure_date - arrival_date), 2) AS average_stay,COUNT(patient_id) AS patient_count
FROM patients GROUP BY service HAVING ROUND(AVG(departure_date - arrival_date), 2) > 7
ORDER BY average_stay DESC;

ğŸ§  **Explanation**
* `departure_date - arrival_date` â†’ Calculates each patient's stay duration in days.
* `AVG(...)` â†’ Finds the average stay length for each service.
* `ROUND(..., 2)` â†’ Rounds the average stay to two decimal places.
* `COUNT(patient_id)` â†’ Counts total patients under each service.
* `HAVING` â†’ Filters out services where average stay â‰¤ 7 days.
* `ORDER BY average_stay DESC` â†’ Sorts services from longest to shortest average stay.

## ** Practice Questions**

**1ï¸âƒ£ Extract the year from all patient arrival dates.**
SELECT patient_id, name, EXTRACT(YEAR FROM arrival_date) AS arrival_year FROM patients;

**2ï¸âƒ£ Calculate the length of stay for each patient (departure_date - arrival_date).**
SELECT patient_id, name, (departure_date - arrival_date) AS stay_length FROM patients;

**3ï¸âƒ£ Find all patients who arrived in a specific month (e.g., November).**
SELECT * FROM patients WHERE EXTRACT(MONTH FROM arrival_date) = 11 ORDER BY arrival_date;

ğŸ™Œ **Acknowledgement**
Thanks to [@DPDzero](https://github.com/DPDzero) and [@indiandataclub](https://github.com/indiandataclub)
for the amazing **#SQLWithIDC** challenge series!
