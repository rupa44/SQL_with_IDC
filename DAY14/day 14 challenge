# ğŸŒŸ **SQLWithIDC â€“ Day 14 Challenge**

## ğŸ§© **Challenge Question**

Create a staff utilisation report showing all staff members (staff_id, staff_name, role, service) and the count of weeks they were present (from staff_schedule).
Include staff members even if they have no schedule records. Order by weeks present descending.

## ğŸ’» **SQL Query**
SELECT s.*,SUM(ss.present) AS count_of_weeks_present FROM staff s LEFT JOIN staff_schedule ss
ON s.staff_id = ss.staff_id GROUP BY s.staff_id ORDER BY count_of_weeks_present DESC;

## ğŸ§  **Explanation**
* `LEFT JOIN` â†’ Ensures **all staff** appear, even if they have no schedule.
* `SUM(ss.present)` â†’ Adds up all the weeks where the staff member was marked **present**.
* `GROUP BY s.staff_id` â†’ One row per staff member.
* `ORDER BY count_of_weeks_present DESC` â†’ Shows most-present staff **first**.

## **Practice Questions**
### 1ï¸âƒ£ Show all staff and their schedule details (include staff with no schedule)
  
SELECT s.*,COUNT(ss.week) AS week_count, SUM(ss.present) AS weeks_present
FROM staff s LEFT JOIN staff_schedule ss ON ss.staff_id = s.staff_id
GROUP BY s.staff_id;

### 2ï¸âƒ£ List all services from services_weekly with their staff (include services with no staff)
  
SELECT s.staff_id,sw.service,s.staff_name,s.role FROM services_weekly sw LEFT JOIN staff s
ON sw.service = s.service;

### 3ï¸âƒ£ Display all patients and their serviceâ€™s weekly statistics (if available)
  
SELECT p.patient_id,p.name,p.age,p.service, sw.week,sw.available_beds,sw.patients_admitted,sw.patients_refused,sw.patient_satisfaction
FROM patients p LEFT JOIN services_weekly sw ON p.service = sw.service;

## ğŸ™Œ **Acknowledgement**
Thanks to **@DPDzero** and **@IndianDataClub** for inspiring another great day of **#SQLWithIDC** learning!
