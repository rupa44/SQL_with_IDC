
#  SQLWithIDC ‚Äì Day 7 Challenge

##  **Challenge Question**

Identify services that refused more than 100 patients in total and had an average patient satisfaction below 80.
Show service name, total refused, and average satisfaction.

## üíª **SQL Query**
SELECT service,SUM(patients_refused) AS total_refused,ROUND(AVG(patient_satisfaction), 2) AS avg_satisfaction
FROM services_weekly GROUP BY service HAVING SUM(patients_refused) > 100 AND AVG(patient_satisfaction) < 80;

üß† **Explanation**
* `SUM(patients_refused)` ‚Üí Calculates the total number of patients refused for each service.
* `AVG(patient_satisfaction)` ‚Üí Finds the average satisfaction score per service.
* `HAVING SUM(patients_refused) > 100` ‚Üí Filters services with more than 100 refused patients.
* `AND AVG(patient_satisfaction) < 80` ‚Üí Further filters those with satisfaction below 80.
* `ROUND(..., 2)` ‚Üí Rounds the average satisfaction to 2 decimal places for clarity.

## **Practical Questions**
**1Ô∏è‚É£ Find services that have admitted more than 500 patients in total.**
SELECT service,SUM(patients_admitted) AS total_admitted FROM services_weekly GROUP BY service HAVING SUM(patients_admitted) > 500;

**2Ô∏è‚É£ Show services where average patient satisfaction is below 75.**
SELECT service,ROUND(AVG(patient_satisfaction), 2) AS average_patients_satisfaction FROM services_weekly GROUP BY service
HAVING AVG(patient_satisfaction) < 75;

**3Ô∏è‚É£ List weeks where total staff presence across all services was less than 50.**
SELECT week,SUM(present) AS total_presence FROM staff_schedule GROUP BY week HAVING SUM(present) < 50
ORDER BY week;

üôå **Acknowledgement**
Thanks to [@DPDzero](https://github.com/DPDzero) and [@indiandataclub](https://github.com/indiandataclub)
for the amazing **#SQLWithIDC** challenge!
